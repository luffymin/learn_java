<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>websocket to cmpp</title>		
	</head>
	<body>
		username: <input type="text" name="" id="username" value=""/></br>
		<button type="button" id="send">send</button></br>
		<div id="response"></div>
	</body>
</html>
<script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
<script type="text/javascript"> 
	var ws = new WebSocket("ws://127.0.0.1:8080/cmpp");

	//开启连接open后客户端处理方法
	ws.onopen = function() {
		document.getElementById('response').innerHTML="连接已打开";
	};

	$('#send').click(function() {
		var obj = new Object();
		obj.username = $('#username').val();	
		ws.send(JSON.stringify(obj));
	})

	ws.onmessage = function (evt) { 
		console.log(evt.data);
		$('#response').text(evt.data);
	};
	
	ws.onclose = function() {
		alert("连接已关闭"); 
	};

</script>
